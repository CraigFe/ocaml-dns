<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dns_resolver (dns-lwt.Dns_resolver)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">dns-lwt</a> &#x00BB; Dns_resolver</nav><h1>Module <code>Dns_resolver</code></h1></header><dl><dt class="spec type" id="type-commfn"><a href="#type-commfn" class="anchor"></a><code><span class="keyword">type </span>commfn</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-commfn.txfn" class="anchored"><td class="def field"><a href="#type-commfn.txfn" class="anchor"></a><code>txfn : Cstruct.t <span>&#45;&gt;</span> unit Lwt.t;</code></td><td class="doc"><p><code>txfn buf</code> resolves when <code>buf</code> has been transmitted.</p></td></tr><tr id="type-commfn.rxfn" class="anchored"><td class="def field"><a href="#type-commfn.rxfn" class="anchor"></a><code>rxfn : (Cstruct.t <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-t">Dns.Packet.t</a> option) <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-t">Dns.Packet.t</a> Lwt.t;</code></td><td class="doc"><p><code>rxfn parse</code> resolves to a packet processed by <code>parse</code> after it has been received.</p></td></tr><tr id="type-commfn.timerfn" class="anchored"><td class="def field"><a href="#type-commfn.timerfn" class="anchor"></a><code>timerfn : unit <span>&#45;&gt;</span> unit Lwt.t;</code></td><td class="doc"><p><code>timerfn ()</code> resolves when a request should be timed out.</p></td></tr><tr id="type-commfn.cleanfn" class="anchored"><td class="def field"><a href="#type-commfn.cleanfn" class="anchor"></a><code>cleanfn : unit <span>&#45;&gt;</span> unit Lwt.t;</code></td><td class="doc"><p><code>cleanfn ()</code> resolves after any resources used by the rest of the <a href="index.html#type-commfn"><code>commfn</code></a> have been released.</p></td></tr></table><code>}</code></dt><dd><p>A <code>commfn</code> value describes the means by which datagram transmission and reception occur as well as providing functions to timeout requests and clean up any resources used.</p></dd></dl><dl><dt class="spec value" id="val-resolve_pkt"><a href="#val-resolve_pkt" class="anchor"></a><code><span class="keyword">val </span>resolve_pkt : (<span class="keyword">module </span><a href="../../dns/Dns/Protocol/module-type-CLIENT/index.html">Dns.Protocol.CLIENT</a>) <span>&#45;&gt;</span> ?&#8288;alloc:(unit <span>&#45;&gt;</span> Cstruct.t) <span>&#45;&gt;</span> <a href="index.html#type-commfn">commfn</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-t">Dns.Packet.t</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-t">Dns.Packet.t</a> Lwt.t</code></dt><dd><p><code>resolve_pkt client ?alloc commfn packet</code> will attempt resolution of the query contained in <code>packet</code> via the protocol client <code>client</code> and using the utilities of <code>commfn</code>. <code>alloc</code> may be provided to control how buffers are allocated.</p><p><code>client</code> may issue multiple network transactions for the same query simultaneously. The first received successful response will be returned. If no responses are successful or received before <a href="index.html#type-commfn.timerfn"><code>commfn.timerfn</code></a> resolves, the <span class="xref-unresolved" title="unresolved reference to &quot;Lwt.t&quot;"><code>Lwt</code>.t</span> value will fail with a <a href="../../dns/Dns/Protocol/index.html#exception-Dns_resolve_error"><code>Protocol.Dns_resolve_error</code></a> exception which contains a list of all of the errors encountered during resolution.</p></dd></dl><dl><dt class="spec value" id="val-resolve"><a href="#val-resolve" class="anchor"></a><code><span class="keyword">val </span>resolve : (<span class="keyword">module </span><a href="../../dns/Dns/Protocol/module-type-CLIENT/index.html">Dns.Protocol.CLIENT</a>) <span>&#45;&gt;</span> ?&#8288;alloc:(unit <span>&#45;&gt;</span> Cstruct.t) <span>&#45;&gt;</span> ?&#8288;dnssec:bool <span>&#45;&gt;</span> <a href="index.html#type-commfn">commfn</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-q_class">Dns.Packet.q_class</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-q_type">Dns.Packet.q_type</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Name/index.html#type-t">Dns.Name.t</a> <span>&#45;&gt;</span> <a href="../../dns/Dns/Packet/index.html#type-t">Dns.Packet.t</a> Lwt.t</code></dt><dd><p><code>resolve client ?alloc ?dnssec commfn q_class q_type name</code> will construct a query packet from <code>dnssec</code>, <code>q_class</code>, <code>q_type</code>, and <code>name</code> and then attempt to resolve it by calling <a href="index.html#val-resolve_pkt"><code>resolve_pkt</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-gethostbyname"><a href="#val-gethostbyname" class="anchor"></a><code><span class="keyword">val </span>gethostbyname : ?&#8288;alloc:(unit <span>&#45;&gt;</span> Cstruct.t) <span>&#45;&gt;</span> ?&#8288;q_class:<a href="../../dns/Dns/Packet/index.html#type-q_class">Dns.Packet.q_class</a> <span>&#45;&gt;</span> ?&#8288;q_type:<a href="../../dns/Dns/Packet/index.html#type-q_type">Dns.Packet.q_type</a> <span>&#45;&gt;</span> <a href="index.html#type-commfn">commfn</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> Ipaddr.t list Lwt.t</code></dt><dt class="spec value" id="val-gethostbyaddr"><a href="#val-gethostbyaddr" class="anchor"></a><code><span class="keyword">val </span>gethostbyaddr : ?&#8288;alloc:(unit <span>&#45;&gt;</span> Cstruct.t) <span>&#45;&gt;</span> ?&#8288;q_class:<a href="../../dns/Dns/Packet/index.html#type-q_class">Dns.Packet.q_class</a> <span>&#45;&gt;</span> ?&#8288;q_type:<a href="../../dns/Dns/Packet/index.html#type-q_type">Dns.Packet.q_type</a> <span>&#45;&gt;</span> <a href="index.html#type-commfn">commfn</a> <span>&#45;&gt;</span> Ipaddr.V4.t <span>&#45;&gt;</span> string list Lwt.t</code></dt></dl></div></body></html>